INCLUDE "include/hardware.inc"

SECTION "Header", ROM0[$100]
    nop
    jp EntryPoint

    ds $150 - @, 0 ; Make room for the header

EntryPoint:
    ; Do not turn the LCD off outside of VBlank
WaitVBlank:
    ld a, [rLY]
    cp LY_VBLANK
    jp c, WaitVBlank

    ; Turn the LCD off
    ld a, LCDC_OFF
    ld [rLCDC], a

; Copy the tile data
    ld de, Tiles
    ld hl, $9000
    ld bc, Tiles.end - Tiles
CopyTiles:
    ld a, [de]
    ld [hli], a
    inc de
    dec bc
    ld a, b
    or a, c
    jp nz, CopyTiles

; Copy the tilemap
    ld de, Tilemap
    ld hl, $9800
    ld bc, Tilemap.end - Tilemap
CopyTilemap:
    ld a, [de]
    ld [hli], a
    inc de
    dec bc
    ld a, b
    or a, c
    jp nz, CopyTilemap

 ; Turn the LCD on
    ld a, LCDC_ON | LCDC_BG_ON
    ld [rLCDC], a

    ; During the first (blank) frame, initialize display registers
    ld a, %11_10_01_00
    ld [rBGP], a

Done:
    jp Done

Tiles:
    dw `33333333, `33333333, `33333333, `33322222, `33322222, `33322222, `33322211, `33322211 ; $00
    dw `33333333, `33333333, `33333333, `22222222, `22222222, `22222222, `11111111, `11111111 ; $01
    dw `33333333, `33333333, `33333333, `22222333, `22222333, `22222333, `11222333, `11222333 ; $02
    dw `33333333, `33333333, `33333333, `33333333, `33333333, `33333333, `33333333, `33333333 ; $03
    dw `33322211, `33322211, `33322211, `33322211, `33322211, `33322211, `33322211, `33322211 ; $04
    dw `22222222, `20000000, `20111111, `20111111, `20111111, `20111111, `22222222, `33333333 ; $05
    dw `22222223, `00000023, `11111123, `11111123, `11111123, `11111123, `22222223, `33333333 ; $06
    dw `11222333, `11222333, `11222333, `11222333, `11222333, `11222333, `11222333, `11222333 ; $07
    dw `00000000, `00000000, `00000000, `00000000, `00000000, `00000000, `00000000, `00000000 ; $08
    dw `11001100, `11111111, `11111111, `21212121, `22222222, `22322232, `23232323, `33333333 ; $09
    dw `33000000, `33000000, `33000000, `33000000, `33111100, `33111100, `33111111, `33111111 ; $0A
    dw `33331111, `00331111, `00331111, `00331111, `00331111, `00331111, `11331111, `11331111 ; $0B
    dw `11333300, `11113300, `11113300, `11113300, `11113311, `11113311, `11113311, `11113311 ; $0C
    dw `00003333, `00000033, `00000033, `00000033, `11000033, `11000033, `11111133, `11111133 ; $0D
    dw `33111111, `33111111, `33111111, `33111111, `33111111, `33111111, `33111111, `33111111 ; $0E
    dw `11331111, `11331111, `11331111, `11331111, `11331111, `11331111, `11331111, `11331111 ; $0F
    dw `11113311, `11113311, `11113311, `11113311, `11113311, `11113311, `11113311, `11113311 ; $10
    dw `11111133, `11111133, `11111133, `11111133, `11111133, `11111133, `11111133, `11111133 ; $11
    dw `33111111, `33111111, `33111111, `33111111, `33111111, `33111111, `33111111, `33111111 ; $12
    dw `11331111, `11331111, `11331111, `11331111, `11331111, `11331111, `11331111, `11331111 ; $13
    dw `11113311, `11113311, `11113311, `11113311, `11113311, `11113311, `11113311, `11113311 ; $14
    dw `11111133, `11111133, `11111133, `11111133, `11111133, `11111133, `11111133, `11111133 ; $15
    dw `33111111, `33111111, `33111111, `33111111, `33111111, `33111111, `33111111, `33111111 ; $16
    dw `11331111, `11331111, `11331111, `11331111, `11330000, `11330000, `11330000, `33330000 ; $17
    dw `11113311, `11113311, `00003311, `00003311, `00003311, `00003311, `00003311, `00333311 ; $18
    dw `11111133, `11111133, `11111133, `11111133, `11111133, `11111133, `11111133, `11113333 ; $19
.end

Tilemap:
    db $00, $01, $01, $01, $01, $01, $01, $01, $01, $01, $01, $01, $01, $02, $03, $03, $03, $03, $03, $03, 0,0,0,0,0,0,0,0,0,0,0,0
    db $04, $05, $06, $05, $06, $05, $06, $05, $06, $05, $06, $05, $06, $07, $03, $03, $03, $03, $03, $03, 0,0,0,0,0,0,0,0,0,0,0,0
    db $04, $08, $05, $06, $05, $06, $05, $06, $05, $06, $05, $06, $08, $07, $03, $03, $03, $03, $03, $03, 0,0,0,0,0,0,0,0,0,0,0,0
    db $04, $05, $06, $05, $06, $05, $06, $05, $06, $05, $06, $05, $06, $07, $03, $03, $03, $03, $03, $03, 0,0,0,0,0,0,0,0,0,0,0,0
    db $04, $08, $05, $06, $05, $06, $05, $06, $05, $06, $05, $06, $08, $07, $03, $03, $03, $03, $03, $03, 0,0,0,0,0,0,0,0,0,0,0,0
    db $04, $05, $06, $05, $06, $05, $06, $05, $06, $05, $06, $05, $06, $07, $03, $03, $03, $03, $03, $03, 0,0,0,0,0,0,0,0,0,0,0,0
    db $04, $08, $05, $06, $05, $06, $05, $06, $05, $06, $05, $06, $08, $07, $03, $03, $03, $03, $03, $03, 0,0,0,0,0,0,0,0,0,0,0,0
    db $04, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $07, $03, $03, $03, $03, $03, $03, 0,0,0,0,0,0,0,0,0,0,0,0
    db $04, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $07, $03, $03, $03, $03, $03, $03, 0,0,0,0,0,0,0,0,0,0,0,0
    db $04, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $07, $03, $03, $03, $03, $03, $03, 0,0,0,0,0,0,0,0,0,0,0,0
    db $04, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $07, $03, $03, $03, $03, $03, $03, 0,0,0,0,0,0,0,0,0,0,0,0
    db $04, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $07, $03, $03, $03, $03, $03, $03, 0,0,0,0,0,0,0,0,0,0,0,0
    db $04, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $07, $03, $03, $03, $03, $03, $03, 0,0,0,0,0,0,0,0,0,0,0,0
    db $04, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $07, $03, $0A, $0B, $0C, $0D, $03, 0,0,0,0,0,0,0,0,0,0,0,0
    db $04, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $07, $03, $0E, $0F, $10, $11, $03, 0,0,0,0,0,0,0,0,0,0,0,0
    db $04, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $07, $03, $12, $13, $14, $15, $03, 0,0,0,0,0,0,0,0,0,0,0,0
    db $04, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $07, $03, $16, $17, $18, $19, $03, 0,0,0,0,0,0,0,0,0,0,0,0
    db $04, $09, $09, $09, $09, $09, $09, $09, $09, $09, $09, $09, $09, $07, $03, $03, $03, $03, $03, $03, 0,0,0,0,0,0,0,0,0,0,0,0
.end
